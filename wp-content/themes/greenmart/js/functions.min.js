"use strict";class StickyHeader{constructor(){if("undefined"!=typeof greenmart_settings){let e=this;if(greenmart_settings.skin_elementor){this.$tbayHeader=$(".tbay_header-template"),this.$tbayHeaderMain=$(".tbay_header-template .header-main"),this.$tbayHeader.hasClass("main-sticky-header")&&this.$tbayHeaderMain.length>0&&e._initStickyHeader();let t=$(".element-sticky-header");t.length>0&&e._initELementStickyheader(t)}else e._initStickyHeaderWPBakery()}}_initStickyHeaderWPBakery(){var e=jQuery("#tbay-header");if(e.hasClass("main-sticky-header")){var t=jQuery(window).width(),a=e.height();jQuery("#tbay-header.sticky-header1").height();"restaurant"==greenmart_settings.active_theme&&(a=0),$(window).scroll(function(){if(t>=1024)if(jQuery(this).scrollTop()>a){if(e.hasClass("sticky-header1"))return;e.addClass("sticky-header1"),e.parent().css("margin-top",a),e.addClass("sticky-header1").css("top",jQuery("#wpadminbar").outerHeight())}else e.removeClass("sticky-header1"),e.parent().css("margin-top",0)})}}_initStickyHeader(){var e=this,t=$(window).width(),a=e.$tbayHeader.outerHeight(),n=e.$tbayHeaderMain.outerHeight(),o=$("#wpadminbar").length>0?$("#wpadminbar").outerHeight():0,i=e.$tbayHeaderMain.offset().top;if(t>=1024)if(0==i||i==o){if(e.$tbayHeader.hasClass("sticky-header"))return;e._stickyHeaderOnDesktop(n,i,o),e.$tbayHeaderMain.addClass("sticky-1"),$(window).scroll(function(){$(this).scrollTop()>a?e.$tbayHeaderMain.addClass("sticky-box"):e.$tbayHeaderMain.removeClass("sticky-box")})}else $(window).scroll(function(){if(e.$tbayHeader.hasClass("main-sticky-header"))if($(this).scrollTop()>i-o){if(e.$tbayHeader.hasClass("sticky-header"))return;e._stickyHeaderOnDesktop(n,i,o)}else e.$tbayHeaderMain.css("top",0).css("position","relative").removeClass("sticky-header").parent().css("padding-top",0),e.$tbayHeaderMain.prev().css("margin-bottom",0)})}_stickyHeaderOnDesktop(e,t,a){this.$tbayHeaderMain.addClass("sticky-header").css("top",a).css("position","fixed"),0==t||t==a?this.$tbayHeaderMain.parent().css("padding-top",e):this.$tbayHeaderMain.prev().css("margin-bottom",e)}_initELementStickyheader(e){var t=e.first();let a=this;var n=!1,o=0,i=0;if(0!==t.parents(".tbay_header-template").length){var s=$("#wpadminbar").length>0?$("#wpadminbar").outerHeight():0,r=t.offset().top-$(window).scrollTop()-s,l=r;t.prevAll().each(function(){i+=$(this).outerHeight()}),e.each(function(){$(this).parents(".element-sticky-header").length>0||(o+=$(this).outerHeight())}),a._initELementStickyheaderContent(r,l,o,i,e,t,s,n),$(window).scroll(function(){n=!0,0===$(window).scrollTop()&&(l=0),a._initELementStickyheaderContent(r,l,o,i,e,t,s,n)})}}_initELementStickyheaderContent(e,t,a,n,o,i,s,r){if($(window).scrollTop()<n&&r||0===$(window).scrollTop()&&r){if(i.parent().children().first().hasClass("element-sticky-header"))return;i.css("top",""),t===e||0===t?o.last().next().css("padding-top",""):i.prev().css("margin-bottom",""),i.parent().css("padding-top",""),o.each(function(){$(this).removeClass("sticky"),$(this).prev(".element-sticky-header").length>0&&$(this).css("top","")})}else{if($(window).scrollTop()<n&&!r)return;o.each(function(){if(!($(this).parents(".element-sticky-header").length>0)&&($(this).addClass("sticky"),$(this).prevAll(".element-sticky-header").length>0)){let e=0;$(this).prevAll(".element-sticky-header").each(function(){e+=$(this).outerHeight()}),$(this).css("top",e+s)}}),i.css("top",s),t===e||0===t?(i.addClass("sticky"),i.parent().css("padding-top",a)):i.prev().css("margin-bottom",a)}}}const DEVICE={ANDROID:/Android/i,BLACK_BERRY:/BlackBerry/i,IOS:/iPhone|iPad|iPod/i,OPERA:/Opera Mini/i,WINDOW:/IEMobile/i,ANY:/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i};let isDevice=e=>{navigator.userAgent.match(e)};class Mobile{constructor(){this._removeActiveMobileMenu(),this._topBarDevice(),this._fixVCAnimation(),this._categoryMenu(),this._mobileMenu(),this._searchMobileShow(),$(window).scroll(()=>{this._topBarDevice();this._fixVCAnimation()})}_removeActiveMobileMenu(){let e=$(window),t=$("#tbay-mobile-menu,.topbar-device-mobile .active-mobile,#tbay-header.header-v4 .header-main .tbay-mainmenu .btn-offcanvas,#tbay-header.header-v5 .header-main .tbay-mainmenu .btn-offcanvas,.topbar-mobile .btn.btn-offcanvas,.wrapper-container .tbay-offcanvas");e.on("click.Bst,click touchstart tap",function(e){0!=t.has(e.target).length||t.is(e.target)||($(".wrapper-container").removeClass("active"),$("#tbay-mobile-menu").removeClass("active"))})}_topBarDevice(){if(greenmart_settings.mobile){var e=$(window).scrollTop(),t=$(".topbar-device-mobile").height(),a=$(window).scrollTop();$(".topbar-device-mobile").toggleClass("active",e<=t),$("#tbay-mobile-menu, #tbay-mobile-menu-navbar").toggleClass("offsetop",0==a),$("#wpadminbar").length>0&&$("body").toggleClass("active-admin-bar",0==a)}}_fixVCAnimation(){if($(".wpb_animate_when_almost_visible").length>0&&!$(".wpb_animate_when_almost_visible").hasClass("wpb_start_animation")){let t=$(window).height(),a=$(".wpb_animate_when_almost_visible:not(.wpb_start_animation)");var e=a.offset().top-$(window).scrollTop();isDevice(DEVICE.ANY)?a.removeClass("wpb_animate_when_almost_visible"):e<t-50&&a.addClass("wpb_start_animation animated")}}_categoryMenu(){$(".category-inside .category-inside-title").on("click",function(){$(this).parents(".category-inside").find(".category-inside-content").slideToggle("fast"),$(this).parents(".category-inside").toggleClass("open")})}_mobileMenu(){$('[data-toggle="offcanvas"], .btn-offcanvas').on("click",function(){$("#wrapper-container").toggleClass("active"),$("#tbay-mobile-menu").toggleClass("active")}),$("#main-mobile-menu .caret").on("click",function(e){$("#main-mobile-menu .dropdown").removeClass("open"),$(e.target).parent().addClass("open")})}_searchMobileShow(){$(document).off("click",".topbar-device-mobile .search-device .show-search").on("click",".topbar-device-mobile .search-device .show-search",function(e){e.preventDefault(),$(".topbar-device-mobile .search-device .tbay-search-form").slideToggle(500,function(){})}),$(document).off("click",".topbar-mobile-right .search-device .show-search").on("click",".topbar-mobile-right .search-device .show-search",function(e){e.preventDefault(),$(".topbar-mobile-right .search-device .tbay-search-form").slideToggle(500,function(){})})}}class AccountMenu{constructor(){this._slideToggleAccountMenu(".tbay-login"),this._slideToggleAccountMenu(".topbar-mobile"),this._clickNotMyAccountMenu(),this._accountButton()}_clickNotMyAccountMenu(){var e=$(window),t=$(".tbay-login .dropdown .account-menu,.topbar-mobile .dropdown .account-menu,.tbay-login .dropdown .account-button,.topbar-mobile .dropdown .account-button");e.on("click.Bst",function(e){0!=t.has(e.target).length||t.is(e.target)||($(".tbay-login .dropdown .account-menu").slideUp(500),$(".topbar-mobile .dropdown .account-menu").slideUp(500))})}_slideToggleAccountMenu(e){$(e).find(".dropdown .account-button").on("click",function(){$(e).find(".dropdown .account-menu").slideToggle(500)})}_accountButton(){$(".tbay-login .dropdown .account-button").on("click",function(){$(".tbay-login .dropdown .account-menu").slideToggle(500,function(){})}),$(".topbar-mobile .dropdown .account-button").on("click",function(){$(".topbar-mobile .dropdown .account-menu").slideToggle(500,function(){})})}}class BackToTop{constructor(){this._init()}_init(){$(window).scroll(function(){var e=$(this).scrollTop()>400;$(".tbay-to-top").toggleClass("active",e),$(".tbay-category-fixed").toggleClass("active",e)}),$("#back-to-top").on("click",this._onClickBackToTop)}_onClickBackToTop(){$("html, body").animate({scrollTop:"0px"},800)}}class CanvasMenu{constructor(){this._initCanvasMenu()}_initCanvasMenu(){let e=$(".element-menu-canvas");0!==e.length&&(e.each(function(){jQuery(this).find(".canvas-menu-btn-wrapper > a").on("click",function(e){$(this).parent().parent().addClass("open"),e.stopPropagation()})}),jQuery(document).on("click",".canvas-overlay-wrapper",function(e){$(this).parent().removeClass("open"),e.stopPropagation()}),jQuery(document).on("click",".toggle-canvas-close",function(e){$(this).parents(".element-menu-canvas").removeClass("open"),e.stopPropagation()}))}}!function(e){e.extend(e.fn,{swapClass:function(e,t){var a=this.filter("."+e);return this.filter("."+t).removeClass(t).addClass(e),a.removeClass(e).addClass(t),this},replaceClass:function(e,t){return this.filter("."+e).removeClass(e).addClass(t).end()},hoverClass:function(t){return t=t||"hover",this.on("hover",function(){e(this).addClass(t)},function(){e(this).removeClass(t)})},heightToggle:function(e,t){e?this.animate({height:"toggle"},e,t):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),t&&t.apply(this,arguments)})},heightHide:function(e,t){e?this.animate({height:"hide"},e,t):(this.hide(),t&&this.each(t))},prepareBranches:function(e){return e.prerendered||this.filter(":last-child:not(ul)").addClass(t.last),this.filter(":has(>ul),:has(>.dropdown-menu)")},applyClasses:function(a,n){this.filter(":has(>ul):not(:has(>a))").find(">span").on("click",function(t){n.apply(e(this).next())}).add(e("a",this)).hoverClass(),a.prerendered||(this.filter(":has(>ul:hidden),:has(>.dropdown-menu:hidden)").addClass(t.expandable).replaceClass(t.last,t.lastExpandable),this.not(":has(>ul:hidden),:has(>.dropdown-menu:hidden)").addClass(t.collapsable).replaceClass(t.last,t.lastCollapsable),this.prepend('<div class="'+t.hitarea+'"/>').find("div."+t.hitarea).each(function(){var t="";e.each(e(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "}),e(this).addClass(t)})),this.find("div."+t.hitarea).on("click",n)},treeview:function(a){function n(){e(this).parent().find(">.hitarea").swapClass(t.collapsableHitarea,t.expandableHitarea).swapClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().swapClass(t.collapsable,t.expandable).swapClass(t.lastCollapsable,t.lastExpandable).find(">ul,>.dropdown-menu").heightToggle(a.animated,a.toggle),a.unique&&e(this).parent().siblings().find(">.hitarea").replaceClass(t.collapsableHitarea,t.expandableHitarea).replaceClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().replaceClass(t.collapsable,t.expandable).replaceClass(t.lastCollapsable,t.lastExpandable).find(">ul,>.dropdown-menu").heightHide(a.animated,a.toggle)}function o(){var t=[];s.each(function(a,n){t[a]=e(n).is(":has(>ul:visible)")?1:0}),e.cookie(a.cookieId,t.join(""))}if((a=e.extend({cookieId:"treeview"},a)).add)return this.trigger("add",[a.add]);if(a.toggle){var i=a.toggle;a.toggle=function(){return i.apply(e(this).parent()[0],arguments)}}this.addClass("treeview");var s=this.find("li").prepareBranches(a);switch(a.persist){case"cookie":var r=a.toggle;a.toggle=function(){o(),r&&r.apply(this,arguments)},function(){var t=e.cookie(a.cookieId);if(t){var n=t.split("");s.each(function(t,a){e(a).find(">ul")[parseInt(n[t])?"show":"hide"]()})}}();break;case"location":var l=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});l.length&&l.addClass("selected").parents("ul, li").add(l.next()).show()}return s.applyClasses(a,n),a.control&&(!function(a,o){function i(o){return function(){return n.apply(e("div."+t.hitarea,a).filter(function(){return!o||e(this).parent("."+o).length})),!1}}e("a:eq(0)",o).on("click",i(t.collapsable)),e("a:eq(1)",o).on("click",i(t.expandable)),e("a:eq(2)",o).on("click",i())}(this,a.control),e(a.control).show()),this.bind("add",function(o,i){e(i).prev().removeClass(t.last).removeClass(t.lastCollapsable).removeClass(t.lastExpandable).find(">.hitarea").removeClass(t.lastCollapsableHitarea).removeClass(t.lastExpandableHitarea),e(i).find("li").andSelf().prepareBranches(a).applyClasses(a,n)})}});var t=e.fn.treeview.classes={open:"open1",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};e.fn.Treeview=e.fn.treeview}(jQuery);class FuncCommon{constructor(){var e=this;e._fancyboxVideo(),e._progressAnimation(),e._createWrapStart(),$(".mod-heading .widget-title > span").wrapStart(),e._greenmartResizeMegamenu(),$(window).on("resize",()=>{e._greenmartResizeMegamenu();e._fixFull()}),setTimeout(function(){jQuery(document.body).on("tbay_load_html_click",()=>{e._greenmartResizeMegamenu()})},2e3),e._fixFull(),e._intTooltip(),e._categoryV6Inside(),e._fixSliderHome3(),e._toCategoryFixed(),e._homeBanner(),e._toggleDropdown()}_fancyboxVideo(){$(".fancybox-video").fancybox({maxWidth:800,maxHeight:600,fitToView:!1,width:"70%",height:"70%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none"}),$(".fancybox").fancybox()}_createWrapStart(){$.fn.wrapStart=function(){return this.each(function(){var e=$(this).contents().filter(function(){return 3==this.nodeType}).first(),t=e.text().trim(),a=t.split(" ",1).join(" ");e.length&&(e[0].nodeValue=t.slice(a.length),e.before("<b>"+a+"</b>"))})}}_progressAnimation(){$("[data-progress-animation]").each(function(){var e=$(this);e.appear(function(){var t=e.attr("data-appear-animation-delay")?e.attr("data-appear-animation-delay"):1;t>1&&e.css("animation-delay",t+"ms"),setTimeout(function(){e.animate({width:e.attr("data-progress-animation")},800)},t)},{accX:0,accY:-50})})}_greenmartResizeMegamenu(){if($("body").innerWidth()>767){if($(".tbay_custom_menu").length>0&&$(".tbay_custom_menu").hasClass("tbay-vertical-menu")){var e=parseInt($("#main-container.container").innerWidth()),t=parseInt($(".tbay-vertical-menu").innerWidth()),a=e-t;$(".tbay-vertical-menu").find(".active-mega-menu").each(function(){$(this).children(".dropdown-menu").css("max-width",a+"px"),$(this).children(".dropdown-menu").css("width",e-30+"px")})}}else $(".tbay_custom_menu").length>0&&$(".tbay_custom_menu").hasClass("tbay-vertical-menu")&&$(".tbay-vertical-menu").treeview({animated:300,collapsed:!0,unique:!0,hover:!1})}_fixFull(){var e=$("#tbay-main-content").width(),t=($("#tbay-main-content").width()-$("#tbay-main-content >.container").width())/2;$(".tb-full").css("width",e),$(".tb-full").css("max-width",e),$("body").hasClass("rtl")?$(".tb-full").css("margin-right",-t):$(".tb-full").css("margin-left",-t),$(".tb-full >.vc_fluid").css("padding",0)}_categoryV6Inside(){$(".category-v6 .category-inside-title").off().on("click",function(){$(this).parents(".category-v6").find(".menu-category-menu-container").slideToggle("fast"),$(this).parents(".category-v6").toggleClass("open")})}_removeAnimateVisible(){jQuery(window).width()<1024&&jQuery(".wpb_animate_when_almost_visible:not(.wpb_start_animation)").each(function(){jQuery(this).removeClass("wpb_animate_when_almost_visible")})}_fixSliderHome3(){let e=jQuery(window).width();var t=(e-$(".container").width())/2-(e-$(".container-full").width())/2-30;if(e>1520){let e=-t;$(".rev_slider .fix-laptop").css("margin-left",e)}else $(".rev_slider .fix-laptop").removeAttr("style")}_intTooltip(){void 0!==jQuery.fn.tooltip&&jQuery('[data-toggle="tooltip"]').tooltip()}_toCategoryFixed(){var e=($(window).width()-$(".container").width())/2;if(e>=80){var t=e-80;e<110?jQuery("body").hasClass("rtl")?($(".tbay-to-top").css({left:t,right:"auto"}),$(".tbay-category-fixed").css({right:t,left:"auto"})):($(".tbay-to-top").css({right:t,left:"auto"}),$(".tbay-category-fixed").css({left:t,right:"auto"})):($(".tbay-to-top").removeAttr("style"),$(".tbay-category-fixed").removeAttr("style")),$(".tbay-category-fixed").css("display","block"),$(".tbay-to-top").css("display","block")}else $(".tbay-category-fixed").css("display","none"),$(".tbay-to-top").css("display","none")}_intLoader(){$("#loader").delay(100).fadeOut(400,function(){$("body").removeClass("tbay-body-loading"),$(this).remove()})}_homeBanner(){$(".tbay-home-banner").length>0&&$(".tbay-home-banner").parents(".vc_row-fluid").addClass("position-img")}_toggleDropdown(){$(document.body).on("click",'.nav [data-toggle="dropdown"]',function(){this.href&&"#"!=this.href&&(window.location.href=this.href)}),$(document.body).on("click",'.treeview [data-toggle="dropdown"]',function(){this.href&&"#"!=this.href&&(window.location.href=this.href)})}}class TreeView{constructor(){this._treeViewMenu(),this._mobileTreeView(),this._categoryTreeView(),this._tbayTreeViewMenu()}_treeViewMenu(){$(".treeview-menu .menu").treeview({animated:300,collapsed:!0,unique:!0,persist:"location"})}_mobileTreeView(){$(".navbar-offcanvas #main-mobile-menu .treeview .hitarea").remove(),$(".navbar-offcanvas #main-mobile-menu .treeview .sub-menu").css("display","none"),$(".navbar-offcanvas #main-mobile-menu .treeview").removeClass("treeview"),$(".navbar-offcanvas #main-mobile-menu").treeview({animated:300,collapsed:!0,unique:!0,hover:!1})}_categoryTreeView(){$(".category-inside-content #category-menu").addClass("treeview"),$(".category-inside-content #category-menu").treeview({animated:300,collapsed:!0,unique:!0,persist:"location"})}_tbayTreeViewMenu(){void 0!==$.fn.treeview&&void 0!==$(".tbay-treeview")&&$(".tbay-treeview").each(function(){$(this).find("> ul").treeview({animated:400,collapsed:!0,unique:!0,persist:"location"})})}}class NewsLetter{constructor(){this._init()}_init(){void 0!==jQuery.fn.modal&&($("#popupNewsletterModal").on("hidden.bs.modal",function(){Cookies.set("hiddenmodal",1,{expires:.1,path:"/"})}),setTimeout(function(){void 0!==Cookies.get("hiddenmodal")&&""!=Cookies.get("hiddenmodal")||$("#popupNewsletterModal").modal("show")},3e3))}}class Search{constructor(){this._init()}_init(){this._greenmartSearchMobile(),this._buttonClickSearch(),this._searchToTop(),this._searchHeaderv2(),this._searchPopup(),$(".button-show-search").on("click",()=>$(".tbay-search-form").addClass("active")),$(".button-hidden-search").on("click",()=>$(".tbay-search-form").removeClass("active"))}_greenmartSearchMobile(){$(".search-device").each(function(){$(this).find(".show-search").on("click",e=>{e.preventDefault();var t=$(e.currentTarget);t.parent().toggleClass("open");t.parent().find(".tbay-search").focus();$(document.body).trigger("search_device_mobile")})}),$(".search-mobile-close").each(function(e){$(this).off().on("click",function(){$(this).prev().removeClass("open"),$(this).parent().slideUp(500,function(){}),$(this).parents(".search-device").removeClass("open")})}),$(".topbar-mobile .dropdown-menu").on("click",function(e){e.stopPropagation()})}_searchToTop(){$(".search-totop-wrapper .btn-search-totop").on("click",function(){$(".search-totop-content").toggleClass("active"),$(this).toggleClass("active")});var e=$(".search-totop-wrapper .btn-search-totop, .search-totop-content");$(window).on("click.Bst",function(t){0!=e.has(t.target).length||e.is(t.target)||($(".search-totop-wrapper .btn-search-totop").removeClass("active"),$(".search-totop-content").removeClass("active"))})}_buttonClickSearch(){$(".button-show-search").on("click",function(){return $(".tbay-search-form").addClass("active"),!1}),$(".button-hidden-search").on("click",function(){return $(".tbay-search-form").removeClass("active"),!1})}_searchHeaderv2(){$("#tbay-header.header-v2 .header-search-v2 .btn-search-totop").on("click",function(){$("#tbay-header.header-v2 .header-search-v2 .tbay-search-form").slideToggle(500,function(){}),$(this).toggleClass("active")})}_searchPopup(){$(".toogle-btn-search").on("click",function(){$(".tbay-element-search-popup .tbay-search-form").slideToggle(500,function(){}),$(this).toggleClass("active")})}}class Preload{constructor(){this._init()}_init(){if($.fn.jpreLoader){var e=$(".js-preloader");e.jpreLoader({},function(){e.addClass("preloader-done"),$("body").trigger("preloader-done"),$(window).trigger("resize")})}$(".tbay-page-loader").delay(100).fadeOut(400,function(){$("body").removeClass("tbay-body-loading"),$(this).remove()}),$(document.body).hasClass("tbay-body-loader")&&setTimeout(function(){$(document.body).removeClass("tbay-body-loader"),$(".tbay-page-loader").fadeOut(250)},300)}}class Section{constructor(){this._tbayMegaMenu()}_tbayMegaMenu(){let e=$(".elementor-widget-tbay-nav-menu");0!==e.length&&e.find(".tbay-element-nav-menu").each(function(){"horizontal"===$(this).data("wrapper").layout&&($(this).closest(".elementor-top-column").hasClass("tbay-column-static")||$(this).closest(".elementor-top-column").addClass("tbay-column-static"),$(this).closest("section").hasClass("tbay-section-static")||$(this).closest("section").addClass("tbay-section-static"))})}}class Tabs{constructor(){$("ul.nav-tabs li a").on("shown.bs.tab",e=>{$(document.body).trigger("greenmart_tabs_carousel")})}}class Accordion{constructor(){this._init()}_init(){0!==$(".single-product").length&&$("#accordion").on("shown.bs.collapse",function(e){if("undefined"!=typeof greenmart_settings&&greenmart_settings.skin_elementor)t=$(this).find(".collapse.show").prev(".tabs-title");else var t=$(this).find(".collapse.in").prev(".tabs-title");t&&$("html,body").animate({scrollTop:$(t).offset().top-150},500)})}}class MenuDropdownsAJAX{constructor(){"undefined"!=typeof greenmart_settings&&this._initmenuDropdownsAJAX()}_initmenuDropdownsAJAX(){var e=this;$("body").on("mousemove",function(){$(".menu").has(".dropdown-load-ajax").each(function(){var t=$(this);t.hasClass("dropdowns-loading")||t.hasClass("dropdowns-loaded")||e.isNear(t,50,event)&&e.loadDropdowns(t)})})}loadDropdowns(e){var t=this;e.addClass("dropdowns-loading");var a="",n="",o="",i="";"tbay-mobile-menu-navbar"===e.closest("nav").attr("id")?($("#main-mobile-menu-mmenu-wrapper").length>0&&(o+="_"+$("#main-mobile-menu-mmenu-wrapper").data("id")),$("#main-mobile-second-mmenu-wrapper").length>0&&(o+="_"+$("#main-mobile-second-mmenu-wrapper").data("id")),a=greenmart_settings.storage_key+"_megamenu_mobile"+o,i="no-builder"):(a=greenmart_settings.storage_key+"_megamenu_"+e.closest("nav").find("ul").data("id"),i=void 0!==e.closest("nav").find("ul").data("format")?e.closest("nav").find("ul").data("format"):""),n=localStorage.getItem(a);var s=!1,r=[];e.find(".dropdown-load-ajax").each(function(){r.push($(this).find(".dropdown-html-placeholder").data("id"))});try{s=JSON.parse(n)}catch(e){console.log("cant parse Json",e)}s?(t.renderResults(s,e,i),"tbay-mobile-menu-navbar"!==e.attr("id")&&e.removeClass("dropdowns-loading").addClass("dropdowns-loaded")):$.ajax({url:greenmart_settings.ajaxurl,data:{action:"greenmart_load_html_dropdowns",ids:r,format:i},dataType:"json",method:"POST",success:function(n){"success"===n.status?(t.renderResults(n.data,e,i),localStorage.setItem(a,JSON.stringify(n.data))):console.log("loading html dropdowns returns wrong data - ",n.message)},error:function(){console.log("loading html dropdowns ajax error")}})}renderResults(e,t,a){var n=this;Object.keys(e).forEach(function(o){n.removeDuplicatedStylesFromHTML(e[o],function(e){let n=e;if("no-builder"!==a){const t='<li[^>]*><a[^>]*href=["]'+window.location.href+'["]>.*?</a></li>';let a=e.match(t);if(null!==a){let e=a[0],t=e.match(/(?:class)=(?:["']\W+\s*(?:\w+)\()?["']([^'"]+)['"]/g)[0].split('"')[1],o=t+" active",i=e.replace(t,o);n=n.replace(e,i)}}t.find('[data-id="'+o+'"]').replaceWith(n),"tbay-mobile-menu-navbar"!==t.attr("id")&&(t.addClass("dropdowns-loaded"),setTimeout(function(){t.removeClass("dropdowns-loading")},1e3))})})}isNear(e,t,a){var n=e.offset().left-t,o=e.offset().top-t,i=n+e.width()+2*t,s=o+e.height()+2*t,r=a.pageX,l=a.pageY;return r>n&&r<i&&l>o&&l<s}removeDuplicatedStylesFromHTML(e,t){if(greenmart_settings.combined_css)return void t(e);{const a=/<style>.*?<\/style>/gm;let n=e.replace(a,"");return void t(n)}}}class MenuClickAJAX{constructor(){"undefined"!=typeof greenmart_settings&&this._initmenuClickAJAX()}_initmenuClickAJAX(){$(".element-menu-ajax.ajax-active").each(function(){$(this).find(".menu-click").off("click").on("click",function(e){e.preventDefault();var t=$(this);if(t.closest(".element-menu-ajax").hasClass("ajax-active")){var a=t.closest(".tbay-element"),n=a.data("wrapper").type_menu,o=a.data("wrapper").layout,i=a.data("wrapper").header_type;if("toggle"===n)s=a.find(".category-inside-content > nav");else var s=a.find(".menu-canvas-content > nav");var r=s.data("id"),l=greenmart_settings.storage_key+"_"+r+"_"+o,c=!1,d=localStorage.getItem(l);try{c=JSON.parse(d)}catch(e){console.log("cant parse Json",e)}c?(s.html(c),a.removeClass("load-ajax"),t.closest(".element-menu-ajax").removeClass("ajax-active"),"treeview"===o?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):$.ajax({url:greenmart_settings.ajaxurl,data:{action:"greenmart_load_html_click",slug:r,type_menu:n,layout:o,header_type:i},dataType:"json",method:"POST",beforeSend:function(e){a.addClass("load-ajax")},success:function(e){"success"===e.status?(s.html(e.data),localStorage.setItem(l,JSON.stringify(e.data)),"treeview"===o?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):console.log("loading html dropdowns returns wrong data - ",e.message),a.removeClass("load-ajax"),t.closest(".element-menu-ajax").removeClass("ajax-active")},error:function(){console.log("loading html dropdowns ajax error")}})}})})}}class MenuCanvasDefaultClickAJAX{constructor(){"undefined"!=typeof greenmart_settings&&this._initmenuCanvasDefaultClickAJAX()}_initmenuCanvasDefaultClickAJAX(){$(".menu-canvas-click").off("click").on("click",function(e){e.preventDefault();var t=$(this);if(t.hasClass("ajax-active")){var a=$("#"+t.data("id")),n=a.data("wrapper").layout,o=a.data("wrapper").menu_id,i=a.find(".tbay-offcanvas-body > nav"),s=i.data("id"),r=greenmart_settings.storage_key+"_"+s+"_"+n,l=!1,c=localStorage.getItem(r);try{l=JSON.parse(c)}catch(e){console.log("cant parse Json",e)}l?(i.html(l),a.removeClass("load-ajax"),t.removeClass("ajax-active"),"treeview"===n?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):$.ajax({url:greenmart_settings.ajaxurl,data:{action:"greenmart_load_html_canvas_click",slug:s,layout:n,menu_id:o},dataType:"json",method:"POST",beforeSend:function(e){a.addClass("load-ajax")},success:function(e){"success"===e.status?(i.html(e.data),localStorage.setItem(r,JSON.stringify(e.data)),"treeview"===n?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):console.log("loading html dropdowns returns wrong data - ",e.message),a.removeClass("load-ajax"),t.removeClass("ajax-active")},error:function(){console.log("loading html dropdowns ajax error")}})}})}}window.$=window.jQuery,jQuery(document).ready(()=>{new MenuDropdownsAJAX,new MenuClickAJAX,new MenuCanvasDefaultClickAJAX,new StickyHeader,new Tabs,new Accordion,new Mobile,new AccountMenu,new BackToTop,new CanvasMenu,new FuncCommon,new TreeView,new NewsLetter,new Preload,new Search,new Section}),setTimeout(function(){jQuery(document.body).on("tbay_load_html_click_treeview",()=>{new TreeView})},2e3),jQuery(window).on("load",function(){(new FuncCommon)._removeAnimateVisible()}),jQuery(window).resize(()=>{var e=new FuncCommon;e._fixSliderHome3();e._toCategoryFixed();e._intLoader()});
