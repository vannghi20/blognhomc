"use strict";class AutoComplete{constructor(){if("undefined"!=typeof greenmart_settings){var e=this;e._callAjaxSearch(),jQuery(document.body).on("search_device_mobile",t=>{e._callAjaxSearch()})}}_callAjaxSearch(){jQuery("input[name=s]").on("focus",function(){var e=jQuery(this),t=void 0!==jQuery(this).parents("form").data("appendto")?jQuery(this).parents("form").data("appendto"):"";jQuery(this).autocomplete({source:function(a,r){$.ajax({url:greenmart_settings.ajaxurl+"?callback=?&action=greenmart_autocomplete_search",dataType:"json",data:{term:a.term,category:this.element.parent().find(".dropdown_product_cat").val(),style:this.element.data("style"),post_type:this.element.parent().find(".post_type").val(),security:greenmart_ajax.search_nonce},success:function(a,n,i){a.length||e.val().length>1&&e.parents("form").find(t).find("ul").length>0&&e.parents("form").find(t).find("ul li").remove(),r(a)}})},minLength:2,appendTo:t,autoFocus:!0,search:function(e,t){jQuery(e.currentTarget).parents(".tbay-search-form").addClass("load")},select:function(e,t){window.location.href=t.item.link},create:function(){jQuery(this).data("ui-autocomplete")._renderItem=function(e,t){a="";if(""!=t.image)var a='<a class="image" href="'+t.link+'" title="'+t.label+'"><img class="pull-left" src="'+t.image+'" style="margin-right:10px;"></a>';return a+='<div class="group">',a+='<div class="name"><a href="'+t.link+'" title="'+t.label+'">'+t.label+"</a></div>",""!=t.price&&(a+='<div class="price">'+t.price+"</div> "),a+="</div>",jQuery("<li>").append(a).appendTo(e)},jQuery(this).data("ui-autocomplete")._renderMenu=function(e,t){var a=this;jQuery.each(t,function(t,r){a._renderItemData(e,r)}),t[0].view_all?(e.append('<li class="list-header ui-menu-divider">'+t[0].result+"</li>"),e.append('<li class="list-bottom ui-menu-divider"><a class="search-view-all" href="javascript:void(0)">'+greenmart_settings.view_all+"</a></li>")):e.append('<li class="list-header ui-menu-divider">'+t[0].result+"</li>"),jQuery(document.body).trigger("greenmart_search_view_all")}},response:function(e,t){0===t.content.length?(jQuery(".tbay-preloader").text(greenmart_settings.no_results),jQuery(".tbay-preloader").addClass("no-results")):(jQuery(".tbay-preloader").empty(),jQuery(".tbay-preloader").removeClass("no-results"))},open:function(e,t){jQuery(e.target).parents(".tbay-search-form").removeClass("load"),jQuery(e.target).parents(".tbay-search-form").addClass("active")},close:function(){}}).focus(function(){e.val().length>1&&(e.parents("form").find(t).find("ul li").length>0&&e.parents("form").find(t).find("ul").show(),e.trigger(jQuery.Event("keydown")))})}),jQuery(document.body).on("greenmart_search_view_all",()=>{jQuery(".search-view-all").on("click",function(){jQuery(this).parents("form").submit()})}),jQuery(".tbay-preloader").on("click",function(){jQuery(this).parents(".tbay-search-form").removeClass("active"),jQuery(this).parents(".tbay-search-form").find("input[name=s]").val("")}),jQuery("input[name=s]").keyup(function(){0==jQuery(this).val().length&&(jQuery(this).parents(".tbay-search-form").removeClass("load"),jQuery(this).parents(".tbay-search-form").removeClass("active"),jQuery(this).parents(".tbay-search-form").find(".tbay-preloader").empty())})}}jQuery(document).ready(function(e){new AutoComplete});
